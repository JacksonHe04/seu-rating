<!-- web/templates/web/musician_result.html -->
<!-- 音乐人结果页面 -->

{% extends 'web/base.html' %}

<!-- 替换title -->
{% block title %}Musician Result{% endblock %}

<!-- 替换bestTitle -->
{% block bestTitleDiv %}{% endblock %}

<!-- 替换searchDiv -->
{% block search_musician %}
<div class="musician_result_section layout_padding">
    <div class="container">
        <div class="musician_item">
            <div class="row align-items-center">
                <div class="musician_5 col-5">
                    <!-- 音乐人姓名 -->
                    <h1 class="musician_title">{{ musician.name }}</h1>
                    <div class="row align-items-center">
                        <div class="col-4">
                            <!-- 音乐人图片 -->
                            <div class="musician_img">
                                <img src="{{ musician.image_path }}" alt="sdl"/>
                            </div>
                        </div>
                        <div class="col-8">
                            <!-- 音乐人基本信息 -->
                            <p
                                    class="musician_info album_wrapper"
                                    style="margin: 0; padding: 15px"
                            >{{ musician.basic_info }}
                            </p>
                        </div>
                    </div>
                    <!-- 音乐人介绍 -->
                    <p class="musician_intro album_wrapper">
                        {{ musician.introduction }}
                    </p>
                </div>
                
                <div class="col-7">
                    {% for album in albums|slice:":3" %}
                    <!-- 专辑1 -->
                    <div class="album_row" data-album-id="{{ album.id }}">
                        <div class="row">
                            <div class="album_row_wrapper">
                                <div class="col-3">
                                    <div class="album_row_img">
                                        <img src="{{ album.cover_image }}" alt="ab{{ forloop.counter }}1"/>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <div class="row">
                                        <div class="col-3">
                                            <h1 class="album_num">No.{{ forloop.counter }}</h1>
                                        </div>
                                        <div class="col-9">
                                            <!-- 专辑名称 -->
                                            <h1 class="album_main">{{ album.title }}</h1>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-2">
                                            <p class="ranking_main1" style="margin-right: 20px">
                                                SEU Rating
                                            </p>
                                        </div>
                                        <div class="col-5">
                                            <!-- 专辑评分 -->
                                            <p class="ranking_main2">{{ album.seu_rating }}</p>
                                        </div>
                                        <div class="col-5">
                                            <div class="album_in_bt">
                                                <div class="album_in_text">
                                                    <a href="/albumresult/{{ album.id }}/">查看详情</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <!-- 评分人数 -->
                                        <p class="ranking_main3">{{ album.rating_count }}人评分</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

<!-- 删除secondTitleDiv -->
{% block secondTitleDiv %}{% endblock %}

<!-- 删除albums -->
{% block albums %}{% endblock %}

<!-- album_id逻辑 -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const albums = document.querySelectorAll('.album_row[data-album-id]');

        albums.forEach(function (albumDiv) {
            const albumId = albumDiv.getAttribute('data-album-id');
            console.log('Album ID:', albumId);

        });
    });
</script>